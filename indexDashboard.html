<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dashboard de Noticias - Ciudad de Huari</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Dashboard de Noticias</h1>
  </header>

  <section id="metrics">
    <div class="metric">
      <h2>Total de Noticias</h2>
      <p>6</p>
    </div>
    <div class="metric">
      <h2>Visitas Diarias</h2>
      <p id="total-visitas"></p>
      <canvas id="visitas-chart"></canvas>
    </div>
    <!-- Agrega más elementos de métricas aquí -->
  </section>

  <footer>
    <p>© 2023 Dashboard de Noticias - Ciudad de Huari</p>
  </footer>

<script>
  // Función para obtener el número total de visitas diarias
  function obtenerTotalVisitasDiarias() {
    let visitasDiarias = localStorage.getItem('visitasDiarias');
    if (visitasDiarias) {
      document.getElementById("total-visitas").textContent = visitasDiarias;
      actualizarGrafica(visitasDiarias);
    }
  }

  // Función para actualizar la gráfica de visitas diarias
  function actualizarGrafica(visitasDiarias) {
    const fechaActual = new Date().toLocaleDateString('en-US');
    const etiquetas = JSON.parse(localStorage.getItem('etiquetas')) || [];
    const datos = JSON.parse(localStorage.getItem('datos')) || [];

    if (etiquetas.includes(fechaActual)) {
      const indice = etiquetas.indexOf(fechaActual);
      datos[indice] = visitasDiarias;
    } else {
      etiquetas.push(fechaActual);
      datos.push(visitasDiarias);
    }

    const ctx = document.getElementById('visitas-chart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: etiquetas,
        datasets: [{
          label: 'Visitas Diarias',
          data: datos,
          backgroundColor: 'rgba(0, 123, 255, 0.2)',
          borderColor: 'rgba(0, 123, 255, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    localStorage.setItem('etiquetas', JSON.stringify(etiquetas));
    localStorage.setItem('datos', JSON.stringify(datos));
  }

  // Obtener el número total de visitas diarias al cargar el dashboard
  obtenerTotalVisitasDiarias();
</script>

</body>
</html>















